<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <link href="Style.css" rel="stylesheet" type="text/css">
	<title>Dublin Bikes</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCxBlIrPB6Cruhy5JHyTQO78wXKHiIj_mo">
	</script>
</head>
<body>
	<h1>Dublin Bikes</h1>
    <div class="container">
        <!-- Inputting the map adapted from https://www.w3schools.com/graphics/google_maps_intro.asp and https://developers.google.com/maps/documentation/javascript/adding-a-google-map-->
	<div id="map" style="width:100%;height:400px;"></div>
	<script type="text/javascript">
	window.infoWindow;
	var map;
	   
	   var xmlhttp = new XMLHttpRequest();
	   var url = "Dublin.json";
	   xmlhttp.onreadystatechange = function () {
	       if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	           var parsedObj = JSON.parse(xmlhttp.responseText);
	           myMap(parsedObj);
	       }
	   }

	   xmlhttp.open("GET", url, true);
	   xmlhttp.send(); 

	   function myMap(obj){
	   var map = new google.maps.Map(document.getElementById('map'), {
	     zoom: 13,
	     center: new google.maps.LatLng(53.3438,-6.2546),
	     mapTypeId: google.maps.MapTypeId.ROADMAP
	   });
	       
	   var infoWindow = new google.maps.InfoWindow(), marker, i;
             

	   for (i = 0; i < obj.length; i++) { 
           var location = new google.maps.LatLng(obj[i].latitude, obj[i].longitude);
	     marker = new google.maps.Marker({
	       position: location,
	       map: map,
           title: obj[i].name + " " + obj[i].number + " " + obj[i].address 
	     });
	   var name = obj[i].name;
           window.name = name;
	   var address = obj[i].address;
           window.address = address;           
	   var number = obj[i].number;
           window.number = number;
              
	   
	     google.maps.event.addListener(marker, 'click', (function(marker,i) {
             return function() {
	       var output = name + "<br>" + address + "<br>" + number;
	         infoWindow.setContent("Stop name: " + obj[i].name + "<br>" + "Address: " + obj[i].address + "<br>" + "Stop number: " + obj[i].number);
	         infoWindow.open(map,marker);
             }
             })(marker,i));
           
	   }
    }
	</script>
        
<!--Inserting space between map and stats-->
        <section>
        <p></p></section>
        
<!-- Inserting divs for stats -->
    <div class="left">
        <p> Input statistics here </p>
        </div>
        <div class="right">
        <p> More stats/graphs etc. here</p></div>
    </div>
</body>
</html>